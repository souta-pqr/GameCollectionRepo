<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="./assets/css/style.css">
</head>
<body>
<div id="startScreen">
  <h2>ゲーム選択</h2>
  <button onclick="startNumberGame()">数当てゲームを始める</button>
  <button onclick="startRockPaperScissors()">ジャンケンゲームを始める</button>
  <button onclick="startTypingGame()">タイピングゲームを始める</button>
</div>

<div id="gameScreen">
  <h2>数当てゲーム</h2>
  <p id="demo"></p>
  <p id="history">前回の予想: なし</p>
  <p id="remaining">残り回数: 10</p>
  <button id="playButton" style="display: none;" onclick="playNumberGame()">予想する</button>
</div>

<div id="endScreen">
  <h2>ゲーム終了</h2>
  <p id="result"></p>
  <button onclick="restartGame()">もう一度プレイ</button>
  <button onclick="backToStart()">ゲーム選択に戻る</button> <!-- 追加したボタン -->
</div>

<div id="rockPaperScissorsScreen">
  <h2>ジャンケンゲーム</h2>
  <p id="rpsDemo">あなたの手を選んでください。</p>
  <button id="rockButton" style="display: none;" onclick="playRockPaperScissors('rock')">グー</button>
  <button id="paperButton" style="display: none;" onclick="playRockPaperScissors('paper')">パー</button>
  <button id="scissorsButton" style="display: none;" onclick="playRockPaperScissors('scissors')">チョキ</button>
</div>

<div id="rockPaperScissorsEndScreen">
  <h2>ゲーム終了</h2>
  <p id="rpsResult"></p>
  <img id="rpsImage" src="" alt="Computer's choice" width="100" height="100">
  <button onclick="restartRockPaperScissors()">もう一度プレイ</button>
  <button onclick="backToStart()">ゲーム選択に戻る</button> <!-- 追加したボタン -->
</div>


<div id="typingGameScreen" style="display: none;">
    <h2>タイピングゲーム</h2>
    <p id="wordToType"></p>
    <input id="userInput" type="text" oninput="checkInput()" />
    <button onclick="backToStart()">ゲーム選択に戻る</button> <!-- 追加したボタン -->
  </div>
  

<script>
var numberToGuess = Math.floor(Math.random() * 100) + 1;
var lastGuess = null;
var remainingGuesses = 10;
var choices = ['rock', 'scissors', 'paper'];
var images = {
  'rock': './assets/data/janken_gu.png',
  'scissors': './assets/data/janken_choki.png',
  'paper': './assets/data/janken_pa.png'
};
var words = ['apple', 'banana', 'cherry', 'date', 'elderberry', 'fig', 'grape', 'honeydew', 'kiwi', 'lemon', 'mango', 'nectarine', 'orange', 'peach', 'plum', 'quince', 'raspberry', 'strawberry', 'tangerine', 'watermelon', 'xigua', 'yuzu', 'zucchini'];
var currentWord = '';

function backToStart() {
  document.getElementById("typingGameScreen").style.display = "none";
  document.getElementById("rockPaperScissorsScreen").style.display = "none";
  document.getElementById("rockPaperScissorsEndScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "none"; // 追加した行
  document.getElementById("endScreen").style.display = "none"; // 追加した行
  document.getElementById("startScreen").style.display = "block";
  document.getElementById("userInput").value = '';
}

function startNumberGame() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "block";
  document.getElementById("playButton").style.display = "block";
  document.getElementById("demo").innerHTML = "あなたの予想は？";
}

function playNumberGame() {
  var userGuess = prompt("あなたの予想は？");
  if(isNaN(userGuess) || userGuess < 1 || userGuess > 100) {
    document.getElementById("demo").innerHTML = "入力は1から100の半角数字でお願いします。";
    return;
  }
  lastGuess = userGuess;
  document.getElementById("history").innerHTML = "前回の予想: " + lastGuess;
  remainingGuesses--;
  document.getElementById("remaining").innerHTML = "残り回数: " + remainingGuesses;
  if(userGuess == numberToGuess) {
    document.getElementById("demo").innerHTML = "おめでとうございます！正解です！";
    document.getElementById("result").innerHTML = "おめでとうございます！正解です！";
    document.getElementById("gameScreen").style.display = "none";
    document.getElementById("endScreen").style.display = "block";
  } else if(userGuess < numberToGuess) {
    document.getElementById("demo").innerHTML = "もっと大きい数です。";
  } else if(userGuess > numberToGuess) {
    document.getElementById("demo").innerHTML = "もっと小さい数です。";
  }
  if(remainingGuesses <= 0) {
    document.getElementById("demo").innerHTML = "ゲームオーバー！";
    document.getElementById("result").innerHTML = "ゲームオーバー！正解は " + numberToGuess + " でした。";
    document.getElementById("gameScreen").style.display = "none";
    document.getElementById("endScreen").style.display = "block";
  }
}

function restartGame() {
  numberToGuess = Math.floor(Math.random() * 100) + 1;
  lastGuess = null;
  remainingGuesses = 10;
  document.getElementById("history").innerHTML = "前回の予想: なし";
  document.getElementById("remaining").innerHTML = "残り回数: 10";
  document.getElementById("endScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "block";
}

function startRockPaperScissors() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("rockPaperScissorsScreen").style.display = "block";
  document.getElementById("rockButton").style.display = "block";
  document.getElementById("paperButton").style.display = "block";
  document.getElementById("scissorsButton").style.display = "block";
  document.getElementById("rpsDemo").innerHTML = "あなたの手を選んでください。";
}

function playRockPaperScissors(userChoice) {
  var computerChoice = choices[Math.floor(Math.random() * 3)];
  document.getElementById("rpsImage").src = images[computerChoice];
  if(userChoice === computerChoice) {
    document.getElementById("rpsDemo").innerHTML = "引き分け！あなたは " + userChoice + "、コンピュータの手は " + computerChoice + " でした。";
  } else if((userChoice === 'rock' && computerChoice === 'scissors') || (userChoice === 'scissors' && computerChoice === 'paper') || (userChoice === 'paper' && computerChoice === 'rock')) {
    document.getElementById("rpsDemo").innerHTML = "おめでとうございます！あなたの勝ちです！あなたは " + userChoice + "、コンピュータの手は " + computerChoice + " でした。";
  } else {
    document.getElementById("rpsDemo").innerHTML = "残念、あなたの負けです。あなたは " + userChoice + "、コンピュータの手は " + computerChoice + " でした。";
  }
  document.getElementById("rpsResult").innerHTML = document.getElementById("rpsDemo").innerHTML;
  document.getElementById("rockPaperScissorsScreen").style.display = "none";
  document.getElementById("rockPaperScissorsEndScreen").style.display = "block";
}

function restartRockPaperScissors() {
  document.getElementById("rockPaperScissorsEndScreen").style.display = "none";
  document.getElementById("rockPaperScissorsScreen").style.display = "block";
}

function startTypingGame() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("typingGameScreen").style.display = "block";
  currentWord = words[Math.floor(Math.random() * words.length)];
  document.getElementById("wordToType").innerHTML = currentWord;
}

function checkInput() {
  var userInput = document.getElementById("userInput").value;
  if(userInput === currentWord) {
    alert('おめでとうございます！正解です！');
    document.getElementById("userInput").value = '';
    startTypingGame();
  }
}
</script>

</body>
</html>
